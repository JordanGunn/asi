{
  "step": 5,
  "output": {
    "intent_schema": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Plan Intent",
      "type": "object",
      "required": ["action"],
      "properties": {
        "action": {
          "type": "string",
          "enum": ["create", "add-step", "update-status", "status", "archive"]
        },
        "plan_name": {
          "type": "string",
          "description": "Required for create action"
        },
        "step_description": {
          "type": "string",
          "description": "Required for add-step action"
        },
        "step_id": {
          "type": "string",
          "description": "Required for update-status action"
        },
        "new_status": {
          "type": "string",
          "enum": ["pending", "in_progress", "done", "skipped"]
        }
      }
    },
    "execution_plan_schema": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Active Plan",
      "type": "object",
      "required": ["name", "created_at", "status", "steps"],
      "properties": {
        "name": { "type": "string" },
        "created_at": { "type": "string", "format": "date-time" },
        "status": { "type": "string", "enum": ["active", "completed", "archived"] },
        "steps": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["id", "description", "status"],
            "properties": {
              "id": { "type": "string", "pattern": "^S[0-9]{3}$" },
              "description": { "type": "string" },
              "status": { "type": "string", "enum": ["pending", "in_progress", "done", "skipped"] },
              "created_at": { "type": "string", "format": "date-time" },
              "completed_at": { "type": "string", "format": "date-time" }
            }
          }
        }
      }
    },
    "result_schema": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Plan Operation Result",
      "type": "object",
      "required": ["action", "status", "timestamp"],
      "properties": {
        "action": { "type": "string" },
        "status": { "type": "string", "enum": ["success", "failed", "no_change"] },
        "timestamp": { "type": "string", "format": "date-time" },
        "plan_name": { "type": "string" },
        "step_id": { "type": "string" },
        "message": { "type": "string" },
        "summary": {
          "type": "object",
          "properties": {
            "total_steps": { "type": "integer" },
            "pending": { "type": "integer" },
            "in_progress": { "type": "integer" },
            "done": { "type": "integer" },
            "skipped": { "type": "integer" }
          }
        }
      }
    }
  },
  "reasoning_trace": "Three schemas cover the full interaction: Intent captures what user wants, Plan captures current state, Result captures operation outcome. Step IDs use S### pattern to distinguish from task IDs (T###) in other skills."
}
